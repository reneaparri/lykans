<?PHP
@system("clear");

$White    = "\033[0;37m" ;       # White

$ScriptName ="PHP Ashley (c) reneaparri";
$Web="https://github.com/reneaparri/lyka";

echo "$White\n#ActiveLYKA";
echo date("l");
echo "\n\n";

echo "$White";
echo "$ScriptName\n";
echo "$Web\n";

{

mainmenu();

}

function mainmenu(){
//Set font color

// Regular Colors
$Black    = "\033[0;30m" ;     //  # Black
$CRed     = "\033[0;31m" ;     //  # Red
$Blue     = "\033[0;34m" ;        # Blue
$Purple   = "\033[0;35m" ;      # Purple
$Cyan     = "\033[0;36m" ;        # Cyan
$White    = "\033[0;37m" ;       # White
$Green    = "\033[0;32m" ;       # Green
$Yellow   = "\033[0;33m" ;      # Yellow

$hash_tags =array("lykaglobal","lykaglobalph","lykagems","Travel", "SpreadLove",
"StayBlessed","Goodluck","LYKAGlobal","LYKAEmpoweringLykans","TravelThainow2019",
"WeRiseByLiftingOthers","LykaMall","LykaGems","LykaPH","Vivalasvegas",    
"LykaGlobal","LykaShare","LykaWorld","MaxRate","LykaRetail",
"StayBlessed","Goodluck","LYKAGlobal","LYKAEmpoweringLykans","TravelThainow2019",
"WeRiseByLiftingOthers","LykaMall","LykaGems","LykaPH","Vivalasvegas",    
"LykaGlobal","travelthainow2019","LykaUltraRater","LykaMerchants","travelthainow2019",
"lykaglobal","lykaglobalph","lykagems","Travel", "SpreadLove",
"StayBlessed","Goodluck","LYKAGlobal","LYKAEmpoweringLykans","TravelThainow2019",
"LykaGlobal","LykaMall","LykaUltraRater","LykaMerchants","travelthainow2019",
"lykaglobal","lykaglobalph","lykagems","Travel", "SpreadLove",
"WeRiseByLiftingOthers","LykaMall","LykaGems","LykaPH","Vivalasvegas");

$PhoneID=['df0439087259ad38','a5ead687bdb3729c','87a87fe99d0039a5'];
array_push($PhoneID,'7d7e6f904741daea');
array_push($PhoneID,'9f78dab798ab0324');
array_push($PhoneID,'83d23b76250d2a97');
array_push($PhoneID,'7ae21b1182e2a323');
array_push($PhoneID,'29b3e709883d7321');
array_push($PhoneID,'c51e10db899a4cc4');
array_push($PhoneID,'47db99101c533bc5');

$PhoneModel=array("iPhone 4","iPhone 4S","iPhone 5","iPhone 5c","iPhone 5s",
"iPhone 6","iPhone 6 Plus","iPhone 6s","iPhone 6s Plus",
"iPhone SE (1st generation)","iPhone 7","iPhone 7 Plus","iPhone 8",
"iPhone 8 Plus","iPhone X","iPhone XR","iPhone XS","iPhone XS Max",
"iPhone 11","iPhone 11 Pro","iPhone 11 Pro Max","iPhone SE","iPhone 12 mini","iPhone 12","iPhone 12 Pro",
"Tecno Spark 7","Tecno Spark 7 Pro","Vivo V11i","Vivo V11","Vivo V11 Pro",
"Oppo A94","Oppo A12","Vivo Z10","Samsung Galaxy S20","Vivo Y81","Vivo Nex S","Vivo Nex A","Vivo Y75s","Vivo Y83",
"Vivo X21i","Vivo Z1","Vivo Y53i","Nokia 5","Nokia 6","Vivo Y71","Vivo X21 UD","Vivo X21","Vivo V9",
"Vivo X20 Plus UD","Vivo Y75","Vivo V7","Samsung Galaxy S9","Vivo X20 Plus","Vivo X20","Vivo V7+",
"Vivo Y69","Vivo V5s","LG G+","Vivo Y66","Sony Xperia 10","Nokia 3315","Vivo Y55s","Tecno Spark 6 Air","Tecno Spark 6 Go","Vivo Xplay6",
"HTC U20 5G","Vivo X9","Google Pixel 5","OnePlus 9","OnePlus 10","Infinix Hot S10","Vivo X7","Vivo X6S Plus",
"Vivo X6S","Vivo Y31L","Oppo A2","Oppo A11","Vivo Xplay5 Elite","Vivo Y51L","Vivo X6 Plus",
"Vivo X6","Vivo Y51","Vivo Y27L","Vivo Y15S","Vivo V1Max","Vivo V1","Vivo X5Pro","Vivo X5Max+",
"Vivo X5S L","Vivo X Shot","Vivo X3S","Vivo Y15","Vivo Y22","Vivo X5Max","Nokia 3210");

$myaccounts=[];

array_push($myaccounts,"jadeashley01");
array_push($myaccounts,"joegie01");
array_push($myaccounts,"liela0520");
array_push($myaccounts,"radrian2005");
array_push($myaccounts,"jashley06");

$mydummy=[];

array_push($mydummy,"joegie02");
array_push($mydummy,"jo0101");
array_push($mydummy,"joe0102");
array_push($mydummy,"joe0103");
array_push($mydummy,"joe0104");

array_push($mydummy,"joe0105");
array_push($mydummy,"joe0107");
array_push($mydummy,"dada2010");
array_push($mydummy,"dada2111");
array_push($mydummy,"dada2112");

array_push($mydummy,"dada2113");
array_push($mydummy,"max1980");
array_push($mydummy,"max1981");
array_push($mydummy,"max1982");
array_push($mydummy,"xelle2000");

// new

array_push($mydummy,"palin0195");
array_push($mydummy,"hil9765");
array_push($mydummy,"yes564");
array_push($mydummy,"tif897");
array_push($mydummy,"rey5489");

array_push($mydummy,"rhea765");
array_push($mydummy,"yesu3452");
array_push($mydummy,"gorry7653");
array_push($mydummy,"val9087");
array_push($mydummy,"neare3388");
    
array_push($mydummy,"claude4476");
array_push($mydummy,"terry2543");
array_push($mydummy,"bill9764");
array_push($mydummy,"tina3675");
array_push($mydummy,"jen5537");

array_push($mydummy,"frank4566");
array_push($mydummy,"benn2121");
array_push($mydummy,"vic2019");
array_push($mydummy,"filis2020");
array_push($mydummy,"rob3535");

array_push($mydummy,"diane4488");
array_push($mydummy,"mhae8976");
array_push($mydummy,"jeni5567");
array_push($mydummy,"bens3377");
array_push($mydummy,"girly7754");

array_push($mydummy,"mary6565");
array_push($mydummy,"dave3789");
array_push($mydummy,"frnz2011");
array_push($mydummy,"van5567");

echo "$White\n------- PHP Ashley Menu --------";
echo "$White\n[ a ]$Green main <> main rating";
echo "$White\n[ b ]$Green dummy <> main rating";
echo "$White\n[ c ]$Green other account rating";
//echo "$White\n[d]$Green set 4 rating";
//echo "$White\n[e]$Green set 5 rating";
echo "$White\n[ d ]$Green add posts";
echo "$White\n[ e ]$Green add moments";
echo "$White\n[ f ]$Green check gems";
echo "$White\n[ g ]$Green harvest gems";
echo "$White\n[ h ]$Green exit menu";
echo "$White\n--------------------------\n$Yellow";

   $inputtask = readline("Your selection : ");

   switch($inputtask) {
    case "a" : //main to main
            @system("clear");
            // ratedummymain(raters, torate)
            ratedummymain($myaccounts,$myaccounts);
            mainmenu();
    case "b" : //dummy to main
            @system("clear");
            ratedummymain($mydummy,$myaccounts);
            mainmenu();        
    case "c" : //other accounts
            @system("clear");
            other2other();     
            mainmenu();        
    case "d" : //add posts
        @system("clear");
        addaddPostMomentToServer("post",$mydummy,$myaccounts);
        mainmenu();
   case "e" : //add moments
        @system("clear");
        addaddPostMomentToServer("moment",$mydummy,$myaccounts);
        mainmenu();
    case "f" :     
        @system("clear");
        checkgemsmenu($mydummy,$myaccounts, $PhoneID, $PhoneModel);
        mainmenu();
    case "g" :
        @system("clear");
        harvestgemsmenu($myaccounts, $mydummy, $PhoneID, $PhoneModel);
        mainmenu();
    case "h" :
        echo "\nthank you";
        echo "\nscript exits\n\n";
        echo "$White";
        exit;  
    default :

        @system("clear");
        echo "$White\n*** Invalid selection ***\n";   
        mainmenu();

   } //end of switch..case

} //mainmenu

  # ///////////////////////////////////////////
  # //
  # // ROUTINE FOR CHECKING GEMS
  # //
  # //////////////////////////////////////////

function checkgemsmenu($mydummy,$myaccounts, $PhoneID, $PhoneModel)
{

    $Cyan     = "\033[0;36m" ;        # Cyan
    $White    = "\033[0;37m" ;       # White
    $Green    = "\033[0;32m" ;       # Green
    $Yellow   = "\033[0;33m" ;      # Yellow
    $Purple   = "\033[0;35m" ;      # Purple  

$ScriptName ="CHECK GEMS (c) reneaparri";
$Web="https://github.com/reneaparri/lyka";

echo "$White";
echo "$ScriptName\n";
echo "$Web\n\n";
echo "\nCHECK GEMS Menu\n";
echo "$White\n[ 1 ]$Green main accounts";
echo "$White\n[ 2 ]$Green dummy accounts";
echo "$White\n[ 3 ]$Green other account";
echo "$White\n[ 4 ]$Green back\n\n";

   $inputtask = readline("Your selection : ");

   switch($inputtask) {
      case "1" : //post to main
        @system("clear");
        checkmaxgems($myaccounts, "main", $PhoneID, $PhoneModel); 
        mainmenu();      
      case "2" : //post to dummy
        @system("clear");
        checkmaxgems($mydummy, "dummy", $PhoneID, $PhoneModel); 
        mainmenu();      
    case "3" : //post to dummy
        @system("clear");
        checkmaxgems($mydummy, "other", $PhoneID, $PhoneModel); 
        mainmenu();      
          
    case "4" :
       @system("clear");
       mainmenu();   

    default :
       @system("clear");
       mainmenu();   
   }     
return;


}

  # ///////////////////////////////////////////
  # // checkmaxgems
  # //
  # //////////////////////////////////////////

  function checkmaxgems($accounts,$accounttype,$PhoneID, $PhoneModel)
  {
   $Cyan     = "\033[0;36m" ;        # Cyan
   $White    = "\033[0;37m" ;       # White
   $Green    = "\033[0;32m" ;       # Green
   $Yellow   = "\033[0;33m" ;      # Yellow
   $Purple   = "\033[0;35m" ;      # Purple

   $ScriptName ="checkgems [$accounttype] accounts (c) reneaparri";
   $Web="https://github.com/reneaparri/lyka";

   echo "$White";
   echo "$ScriptName\n";
   echo "$Web\n\n";
   echo "Check if how many GEMS do you have\n";
  
   // prompt for username if other is selected
   if($accounttype == "other")
   {
    $maxaccounts=[];
    $acct=0;
    echo "$Yellow\n";
    echo "Input username to check GEMS\n";
    echo "press enter when done\n$Green\n";
    do {
        $inputusername = readline("Username : ");
        if ($inputusername !='') {
        array_push($maxaccounts, "$inputusername",);
        $acct=1;
        }
    } while ($inputusername !='');
    
    if ($acct == 0)
    {
        echo "$Yellow";
        echo "> pls. enter atleast one (1) username\n\n";
            mainmenu(); 
    }

   }

   echo "$Yellow\n";
   echo "Input $accounttype account password\n$Green\n";
   $mainpassword=readline('Password : ');
   if ($mainpassword == '')
   {
       echo "$Yellow\n**empty password**\n";
       mainmenu();    
   }
   
   if ($accounttype != "other")
   {
   $maxaccounts = $accounts; 
   }

   @system("clear");
   echo "$White\n";
   echo "$ScriptName\n";
   echo "$Web\n$Yellow\n";
   echo "details have been collected\n";
   echo "let's check your GEMS...\n\n";
   sleep(2);

   checkgems($maxaccounts,$mainpassword,$PhoneID, $PhoneModel);
   return;
}

//create an OOP so we can use it somewhere else
function checkgems($maxaccounts,$mainpassword,$PhoneID, $PhoneModel)
{
   $Cyan     = "\033[0;36m" ;        # Cyan
   $White    = "\033[0;37m" ;       # White
   $Green    = "\033[0;32m" ;       # Green
   $Yellow   = "\033[0;33m" ;      # Yellow

   $total=0;
   
   //echo "$White----------------------------------\n";
   printf("$White%'-30s\n","");

   $accountnumber=0;
   foreach ($maxaccounts as $activeAcct) {

   $devID=$PhoneID[rand(0,9)];
   $DevName=$PhoneModel[rand(0,50)];

   $accountnumber++;
       #Login to each account
   
       $urll = "https://identity.mylykaapps.com/useraccounts/login";
       $curll = curl_init($urll);
       curl_setopt($curll, CURLOPT_URL, $urll);
       curl_setopt($curll, CURLOPT_POST, true);
       curl_setopt($curll, CURLOPT_RETURNTRANSFER, true);
       $headerss = array("Content-Type: application/json", "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28)");
       curl_setopt($curll, CURLOPT_HTTPHEADER, $headerss);
       $DeviceInfo = <<<DATA
       {
       "countryCode": "US",
       "device": {
       "deviceId": "$devID",
       "deviceImei": "$devID",
       "deviceModel": "$DevName",
       "deviceName": "$DevName",
       "deviceOs": "Android",
       "isEmulator": false,
       "notificationToken": "eEBjxYrDSJyFw7N-DpEGNG:APA91bEZnWo-TDdSgVCzQcJq3gHioJtFThNyxw6PsgOCI1JHDzd55yqG-QZwAZRj4pwICrXo5VODiUYom7Fsf4Ql66-CWHFumNA2ynrKEP21bstPBMgwsN-3G_Ek0ZLcoKtVMg5oN6-gz",
       "osVersion": "11"
     },
     "password": "$mainpassword",
     "username": "$activeAcct"
   }
   DATA;
       curl_setopt($curll, CURLOPT_POSTFIELDS, $DeviceInfo);
       $respp = curl_exec($curll);
       curl_close($curll);
       $jsonn = json_decode($respp);
       $msgn = $jsonn->message;

       if ($msgn=="User logged in")
       {
       $status = $jsonn->status;
       $vuser = $jsonn->data->username;
       $bearer = $jsonn->data->token->accessToken;
       $json = json_decode($respp);  
   
        $TotalGEMS=getgembalance($bearer);

        echo "$White";  
       printf("[%d] %-15s GEMS >$Green %.2f\n",$accountnumber,$activeAcct,$TotalGEMS);
       $total=$total + $TotalGEMS;
   
     } //end of user logged in
   
   } //end of loop for each account
   
     printf("\n$White%'-30s\n","");
     printf("%-15s GEMS >$Yellow %.2f\n","Total",$total);
     echo "$White\n";
     
      
} //end checkgems


#   ///////////////////////////////////////////
#   //
#   // ROUTINE FOR HARVESTING GEMS
#   //
#   //////////////////////////////////////////

function harvestgemsmenu($myaccounts,$accounts, $PhoneID, $PhoneModel)
{
    $Cyan     = "\033[0;36m" ;        # Cyan
    $White    = "\033[0;37m" ;       # White
    $Green    = "\033[0;32m" ;       # Green
    $Yellow   = "\033[0;33m" ;      # Yellow
    $Purple   = "\033[0;35m" ;      # Purple

$ScriptName ="HARVEST GEMS Menu (c) reneaparri";
$Web="https://github.com/reneaparri/lyka";

echo "$White";
echo "$ScriptName\n";
echo "$Web\n\n";
echo "\nHARVEST GEMS Menu\n";
echo "$White\n[ 1 ]$Green from dummy accounts";
echo "$White\n[ 2 ]$Green from other accounts";
echo "$White\n[ 3 ]$Green back\n\n";

   $inputtask = readline("Your selection : ");

   switch($inputtask) {
      case "1" : //dummy
        @system("clear");
        harvestmaxgems($myaccounts, $accounts, "dummy", $PhoneID, $PhoneModel); 
        mainmenu();      
      case "2" : //other accounts
        @system("clear");
        harvestmaxgems($myaccounts,"", "other", $PhoneID, $PhoneModel); 
        mainmenu();      
      
      case "3" :
       @system("clear");
       mainmenu();   

      default :
       @system("clear");
       mainmenu();   
   }     
return;

}

  function harvestmaxgems($myaccounts,$accounts, $acctType, $PhoneID, $PhoneModel)
  {
   $Cyan     = "\033[0;36m" ;        # Cyan
   $White    = "\033[0;37m" ;       # White
   $Green    = "\033[0;32m" ;       # Green
   $Yellow   = "\033[0;33m" ;      # Yellow
   $Purple   = "\033[0;35m" ;      # Purple

       $ScriptName ="Harvest GEMS (c) reneaparri";
       $Web="https://github.com/reneaparri/lyka";
       $accountnumber=0;    
       echo "$White";
       echo "$ScriptName\n";
       echo "$Web\n\n";
       echo "Let's harvest LYKA GEMS\n";

       echo "$White\n";
       
       if($acctType == "other")
       {
        $maxaccounts=[];
        $acct=0;
        echo "\n$Yellow\n";
        echo "Input username to harvest GEMS from\n";
        echo "press enter when done\n$Green\n";
        do {
            $inputusername = readline("Username : ");
            if ($inputusername !='') {
            array_push($maxaccounts, "$inputusername",);
            $acct=1;
            }
        } while ($inputusername !='');
        
        if ($acct == 0)
        {
            echo "$Yellow";
            echo "> pls. enter atleast one (1) username\n\n";
                mainmenu(); 
        }
    
       }
   
       echo "$Yellow\n";
       echo "Input $acctType account password\n$Green\n";
       $mainpassword=readline('Password : ');
       if ($mainpassword == '')
       {
           echo "$Yellow\n**empty password**\n";
           mainmenu();    
       }
       
       if ($acctType != "other")
       {
       $maxaccounts = $accounts; 
       }
   
       //get the account where the harvested gems will be sent
       echo "\nInput LYKA GEMS recipient\n";
       echo "[Default = $myaccounts[0]]\n\n";
    
       $GEMReceiver=readline('Username : ');
       
       if ($GEMReceiver == '')
       {
           $GEMReceiver=$myaccounts[0];
       }

       @system("clear");
       echo "$White\n";
       echo "$ScriptName\n";
       echo "$Web\n$Yellow\n";
       echo "details have been collected\n";
       echo "let's harvest your GEMS...\n$White\n";
       sleep(2);
       
       $harvestedgems=0;

       echo "Recipient >$Yellow $GEMReceiver\n$White";
       printf("$White%'-40s\n","");

       foreach ($maxaccounts as $activeAcct) {

       $devID=$PhoneID[rand(0,9)];
       $DevName=$PhoneModel[rand(0,50)];

           //Login to each account
           $urll = "https://identity.mylykaapps.com/useraccounts/login";
           $curll = curl_init($urll);
           curl_setopt($curll, CURLOPT_URL, $urll);
           curl_setopt($curll, CURLOPT_POST, true);
           curl_setopt($curll, CURLOPT_RETURNTRANSFER, true);
           $headerss = array("Content-Type: application/json", "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28)");
           curl_setopt($curll, CURLOPT_HTTPHEADER, $headerss);
           $DeviceInfo = <<<DATA
           {
           "countryCode": "US",
           "device": {
           "deviceId": "$devID",
           "deviceImei": "$devID",
           "deviceModel": "$DevName",
           "deviceName": "$DevName",
           "deviceOs": "Android",
           "isEmulator": false,
           "notificationToken": "eEBjxYrDSJyFw7N-DpEGNG:APA91bEZnWo-TDdSgVCzQcJq3gHioJtFThNyxw6PsgOCI1JHDzd55yqG-QZwAZRj4pwICrXo5VODiUYom7Fsf4Ql66-CWHFumNA2ynrKEP21bstPBMgwsN-3G_Ek0ZLcoKtVMg5oN6-gz",
           "osVersion": "11"
           },
           "password": "$mainpassword",
           "username": "$activeAcct"
           }
           DATA;
           curl_setopt($curll, CURLOPT_POSTFIELDS, $DeviceInfo);
           $respp = curl_exec($curll);
           curl_close($curll);
           $jsonn = json_decode($respp);
           $msgn = $jsonn->message;

       if ($msgn=="User logged in")
       {    
           $status = $jsonn->status;
           $verifiedAcct = $jsonn->data->username;
           $bearer = $jsonn->data->token->accessToken;
           $json = json_decode($respp);  

           //verify if recipient is valid 
           $urlx = "https://users.mylykaapps.com/api/v3/users/searchsuggestedpeople?searchText=$GEMReceiver&os=android&pageIndex=1&pageSize=16";
           $curlx = curl_init($urlx);
           curl_setopt($curlx, CURLOPT_URL, $urlx);
           curl_setopt($curlx, CURLOPT_RETURNTRANSFER, true);
           $headersx = array("user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28)", "authorization: Bearer $bearer",);
           curl_setopt($curlx, CURLOPT_HTTPHEADER, $headersx);
           $respx = curl_exec($curlx);
           curl_close($curlx);

           $jsonx = json_decode($respx, true);
           $recID = $jsonx["data"]["0"]["id"];
           $usernamex = $jsonx["data"]["0"]["userName"];
       
           $accountnumber++;
           //recipient was validated
           if ($GEMReceiver == $usernamex)
           {

            $TotalGEMS=getgembalance($bearer);

            $SendGEMURL = "https://wallets.mylykaapps.com/api/v3/wallets/SendGem";
               $curlGEMS = curl_init($SendGEMURL);
               $headerGEMS = 
               array("authorization:Bearer $bearer", 
               "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android 11))", 
               "deviceos: android", "Content-Type: application/json",);
               curl_setopt($curlGEMS, CURLOPT_URL, $SendGEMURL);
               curl_setopt($curlGEMS, CURLOPT_POST, true);
               curl_setopt($curlGEMS, CURLOPT_RETURNTRANSFER, true);
               curl_setopt($curlGEMS, CURLOPT_HTTPHEADER, $headerGEMS);
               $balanceGEM = '{
               "amount":"' . $TotalGEMS . '",
               "device":{
                   "deviceId":"$devID",
                   "deviceImei":"$devID",
                   "deviceModel":"$DevName",
                   "deviceName":"$DevName",
                   "deviceOs":"Android",
                   "isEmulator":false,
                   "notificationToken":"eFEXEC5pTAeXLu7JjIlpNX:APA91bF8I2ZGs8wUNDjpw5lSnzrz8fB652HYMxWBdTGtFRSUaBEd0pHZQvWXAd00ESKVUO_VtYieRQxtfEU7f3RUIHEs5zXGZSVqk5PfbzjZTJQcue0vHYRiEobXHk8JUlTa0nmPCdgR",
                   "osVersion":"11"
               },
               "recipientId":' . $recID . '}';

               curl_setopt($curlGEMS, CURLOPT_POSTFIELDS, $balanceGEM);
               $response_GEMbalance = curl_exec($curlGEMS);
               curl_close($curlGEMS);

              $jsonGEM = json_decode($response_GEMbalance);
               //echo$jsonGEM->message;

               echo "$White";
               printf("[%d] %-15s GEMS >$Green %.2f >$Cyan sent\n",$accountnumber,$activeAcct,$TotalGEMS);

               $harvestedgems =$harvestedgems+$TotalGEMS;
            } else {
                echo "$Yellow\nerror confirming recipient\n";
                echo "no GEMS was transferred\n$White\n"; }
               
           sleep(1);
       
       } else {
           echo "$Yellow\n";
           echo "$msgn\n\n";
           break;
       }  //end of User logged in  
       } //end of loop for each acct

       printf("\n$White%'-40s\n","");
       printf ("%-15s GEMS >$Green %.2f\n","Total harvested",$harvestedgems);
       echo "$White\n\n";

       mainmenu();

  } //end harverstmaxgems


///////////////////////////////////////////////////////
//
//  ROUTINE FOR RATING THE POST
//
//////////////////////////////////////////////////////

function ratedummymain($raters,$toRate)
{
    $Cyan     = "\033[0;36m" ;        # Cyan
    $White    = "\033[0;37m" ;       # White
    $Green    = "\033[0;32m" ;       # Green
    $Yellow   = "\033[0;33m" ;      # Yellow
    $Purple   = "\033[0;35m" ;      # Purple

    $ScriptName ="RATE MY POST (c) reneaparri";
    $Web="https://github.com/reneaparri/lyka";

    echo "$White";
    echo "$ScriptName\n";
    echo "$Web\n\n";
    echo "we will be rating posts here\n";
    
    //should use one password per raters account
    echo "$Yellow\n";
    echo "Input account password\n$Green\n";
    $mainpassword=readline('Password : ');
    if ($mainpassword == '')
    {
        echo "$Yellow\n**empty password**\n\n";
        mainmenu();    }
   
    echo "$Yellow\n";

    ratemypost($ScriptName,$Web,$raters,$mainpassword,$toRate);
    return;

}   //end of ratedummymain


function other2other()
{
    $Cyan     = "\033[0;36m" ;        # Cyan
    $White    = "\033[0;37m" ;       # White
    $Green    = "\033[0;32m" ;       # Green
    $Yellow   = "\033[0;33m" ;      # Yellow
    $Purple   = "\033[0;35m" ;      # Purple

    $ScriptName ="other 2 other (c) reneaparri";
    $Web="https://github.com/reneaparri/lyka"; 

echo "$White";
echo "$ScriptName\n";
echo "$Web\n\n";
echo "let's rate each others posts\n";

$raters = [];
$usr=0;
echo "$Yellow";
echo "Input RATERS username\n";
echo "press enter when done\n$Green\n";
do {
   $username = readline('Username : ');
  if ($username !='') {
   array_push($raters, "$username",);
   $usr=1;
   }
} while ($username !='');

if ($usr != 1)
{
    echo "$Yellow\n";
    echo "no RATERS username was entered\n";
    echo "pls. enter atleast one (1) username\n\n";
        mainmenu();}

#should use one password for all accounts
echo "$Yellow\n";
echo "Input the password of your accounts\n$Green\n";
$mainpassword=readline('Password : ');
if ($mainpassword == '')
{
    echo "$Yellow";
    echo "\n**empty password**\n\n";
        mainmenu();
}

$toRate=[];
$acct=0;

echo "$Yellow\n";
echo "Input username to RATE\n";
echo "press enter when done\n$Green\n";
do {
    $inputusername = readline("Username : ");
   if ($inputusername !='') {
    array_push($toRate, "$inputusername",);
    $acct=1;
    }
 } while ($inputusername !='');
 
 if ($acct == 0)  {
     echo "$Yellow";
     echo " > pls. enter atleast one (1) username\n\n";
        mainmenu(); 
        }

ratemypost($ScriptName,$Web,$raters,$mainpassword,$toRate);
return;

} //end of other2other


   #///////////////////////////////////////////
   #// ratemypost
   #//
   #//////////////////////////////////////////

function ratemypost($ScriptName,$Web,$raters,$mainpassword,$toRate)
{

// Regular Colors
$Cyan     = "\033[0;36m" ;        # Cyan
$White    = "\033[0;37m" ;       # White
$Green    = "\033[0;32m" ;       # Green
$Yellow   = "\033[0;33m" ;      # Yellow
$Purple   = "\033[0;35m" ;      # Purple

$PhoneID=['df0439087259ad38','a5ead687bdb3729c','87a87fe99d0039a5'];
array_push($PhoneID,'7d7e6f904741daea');
array_push($PhoneID,'9f78dab798ab0324');
array_push($PhoneID,'83d23b76250d2a97');
ARRAY_push($PhoneID,'7ae21b1182e2a323');
array_push($PhoneID,'29b3e709883d7321');
array_push($PhoneID,'c51e10db899a4cc4');
array_push($PhoneID,'47db99101c533bc5');

$PhoneModel=array("iPhone 4","iPhone 4S","iPhone 5","iPhone 5c","iPhone 5s",
"iPhone 6","iPhone 6 Plus","iPhone 6s","iPhone 6s Plus",
"iPhone SE (1st generation)","iPhone 7","iPhone 7 Plus","iPhone 8",
"iPhone 8 Plus","iPhone X","iPhone XR","iPhone XS","iPhone XS Max",
"iPhone 11","iPhone 11 Pro","iPhone 11 Pro Max","iPhone SE","iPhone 12 mini","iPhone 12","iPhone 12 Pro",
"Tecno Spark 7","Tecno Spark 7 Pro","Vivo V11i","Vivo V11","Vivo V11 Pro",
"Oppo A94","Oppo A12","Vivo Z10","Samsung Galaxy S20","Vivo Y81","Vivo Nex S","Vivo Nex A","Vivo Y75s","Vivo Y83",
"Vivo X21i","Vivo Z1","Vivo Y53i","Nokia 5","Nokia 6","Vivo Y71","Vivo X21 UD","Vivo X21","Vivo V9",
"Vivo X20 Plus UD","Vivo Y75","Vivo V7","Samsung Galaxy S9","Vivo X20 Plus","Vivo X20","Vivo V7+",
"Vivo Y69","Vivo V5s","LG G+","Vivo Y66","Sony Xperia 10","Nokia 3315","Vivo Y55s","Tecno Spark 6 Air","Tecno Spark 6 Go","Vivo Xplay6",
"HTC U20 5G","Vivo X9","Google Pixel 5","OnePlus 9","OnePlus 10","Infinix Hot S10","Vivo X7","Vivo X6S Plus",
"Vivo X6S","Vivo Y31L","Oppo A2","Oppo A11","Vivo Xplay5 Elite","Vivo Y51L","Vivo X6 Plus",
"Vivo X6","Vivo Y51","Vivo Y27L","Vivo Y15S","Vivo V1Max","Vivo V1","Vivo X5Pro","Vivo X5Max+",
"Vivo X5S L","Vivo X Shot","Vivo X3S","Vivo Y15","Vivo Y22","Vivo X5Max","Nokia 3210");


@system("clear");
echo "$White\n";
echo "$ScriptName\n";
echo "$Web\n$Yellow\n";
echo "details have been collected\n";
echo "let's start rating posts...\n";
sleep(1);

#/////////////////// start rating ////////////////////

//echo "\n$White\n";
//echo "Initial GEMS\n";
//checkgems($raters,$mainpassword,$PhoneID, $PhoneModel);


$noofraters=count($raters);
$rated=0;

foreach ($raters as $currentRater) :  #//raters

    #login to raters
    $devID=$PhoneID[rand(0,9)];
    $DevName=$PhoneModel[rand(0,50)];
    
    $rated++;

    //echo "\n$White";
    //printf("%-15s | %s/%s\n","Rater No.",$rated,$noofraters);
    //printf("%-15s | %s\n","Username",$currentRater);

    
    $urll = "https://identity.mylykaapps.com/useraccounts/login";
    $curll = curl_init($urll);
    curl_setopt($curll, CURLOPT_URL, $urll);
    curl_setopt($curll, CURLOPT_POST, true);
    curl_setopt($curll, CURLOPT_RETURNTRANSFER, true);
    $headerss = array("Content-Type: application/json", "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 30)");
    curl_setopt($curll, CURLOPT_HTTPHEADER, $headerss);
    $DeviceInfo = <<<DATA
    {
    "countryCode": "US",
    "device": {
    "deviceId"          : "$devID", 
    "deviceImei"        : "$devID",
    "deviceModel"       : "$DevName",
    "deviceName"        : "$DevName",
    "deviceOs"          : "Android",
    "isEmulator"        : false,
    "notificationToken" : "eEBjxYrDSJyFw7N-DpEGNG:APA91bEZnWo-TDdSgVCzQcJq3gHioJtFThNyxw6PsgOCI1JHDzd55yqG-QZwAZRj4pwICrXo5VODiUYom7Fsf4Ql66-CWHFumNA2ynrKEP21bstPBMgwsN-3G_Ek0ZLcoKtVMg5oN6-gz",
    "osVersion"         : "11"
    },
    "password"          : "$mainpassword",
    "username"          : "$currentRater"
    }
    DATA;
    
    curl_setopt($curll, CURLOPT_POSTFIELDS, $DeviceInfo);
    $respp = curl_exec($curll);
    curl_close($curll);
    sleep(1);
    $jsonn = json_decode($respp);
    $msgn = $jsonn->message;

    if ($msgn == "User logged in") {

    $status = $jsonn->status;
    $vuser = $jsonn->data->username;
    $bearer = $jsonn->data->token->accessToken;
    $json = json_decode($respp);  
    
    echo "$Cyan";
    echo "$msgn\n";

    $toratecount=count($toRate);
    $donerating=0;
    
    # loop to each account to rate
    foreach ($toRate as $BeingRated) : 
    
        $donerating++;  
        if ($currentRater != $BeingRated) : #avoid rating own post

        $urlm = "https://users.mylykaapps.com/api/v3/users/searchsuggestedpeople?searchText=$BeingRated&os=android&pageIndex=1&pageSize=16";
        $curlm = curl_init($urlm);
        curl_setopt($curlm, CURLOPT_URL, $urlm);
        curl_setopt($curlm, CURLOPT_RETURNTRANSFER, true);
        $headersm = array("user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28)", "authorization: Bearer $bearer",);
        curl_setopt($curlm, CURLOPT_HTTPHEADER, $headersm);
        $respm = curl_exec($curlm);
        curl_close($curlm);
    
        $jsonm = json_decode($respm, true);
        $verifiedaccountID = $jsonm["data"]["0"]["id"];
        $verifiedaccount = $jsonm["data"]["0"]["userName"];
    
        if ($BeingRated == $verifiedaccount) :

            echo "$White\n";
            printf("%-5s (%s/%s) | %-15s\n","Rater",$rated,$noofraters,$currentRater);
            printf("%-5s (%s/%s) | %-15s\n","Rated",$donerating,$toratecount,$BeingRated);

            sleep(1);  
            $urld = "https://profiles.mylykaapps.com/api/v3/profiles/GetProfilePosts?os=android&pageIndex=1&pageSize=50&id=$verifiedaccountID&category=ALL";
            $curld = curl_init($urld);
            curl_setopt($curld, CURLOPT_URL, $urld);
            curl_setopt($curld, CURLOPT_RETURNTRANSFER, true);
            $headersd = array("authorization: Bearer $bearer", "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android 11)",);
            curl_setopt($curld, CURLOPT_HTTPHEADER, $headersd);
            $respd = curl_exec($curld);
            curl_close($curld);
            $arr = json_decode($respd, true);
       
                   $x=0;
                   do {
                       $pid[$x] = $arr["data"]["$x"]["id"];
                       $x++;
                   } while ($x !=10);
        
        
    #actual rating of posts
    #loop 10 times
                    $PostNum=0;
                    $xcount=1;
                    do {
                        $PhoneID[rand(0,9)];
                        $DevName=$PhoneModel[rand(0,50)];
                    
                        echo "$White"; 
                        echo "..rating$Green #$xcount ";
                    
                        $url = "https://posts.mylykaapps.com/api/v3/posts/ratepost";
                        $headers = array("authorization:Bearer $bearer", "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28))", "deviceos: android", "Content-Type: application/json",);
                        $curl = curl_init($url);
                        curl_setopt($curl, CURLOPT_URL, $url);
                        curl_setopt($curl, CURLOPT_POST, true);
                        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
                        curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);
                        $data = <<<DATA
                    {
                        "device": {
                        "deviceId"         : "$devID",
                        "deviceImei"       : "$devID",
                        "deviceModel"      : "$DevName",
                        "deviceName"       : "$DevName",
                        "deviceOs"         : "Android",
                        "isEmulator"       : false,
                        "notificationToken": "eEBjxYrDSJyFw7N-DpEGNB:APA91bEZnWo-TRdSgVCzQcJq3gHioJtFThNyxw6PsgOCI1JHDzd55yqG-QZwAZRj4pwICrXo5VDiUYom7Fsf4Ql66-CWHFumNA2ynrKEP21bstPBMgwsN-3G_Ek0ZLcoKtVMg5oN6-pg",
                        "osVersion"        : "11"
                        },
                        "postId": $pid[$PostNum],
                        "rate": 5,
                        "userid": $verifiedaccountID
                    }
                    DATA;
                        curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
                        $resp = curl_exec($curl);
                        curl_close($curl);
                        $json = json_decode($resp);
                        echo "$Cyan";
                        $postmessage=$json->message;
                        
                        if ($postmessage != '')
                        {    
                        
                        if (strstr($postmessage,'Congratulations')) {
                            echo " > rated 10 posts \n";
                        } elseif ($postmessage=="You already have rated this post.")
                        {
                         echo " > already rated\n";    
                        } elseif (strstr($postmessage,'Too many')) {
                            echo " > slow or no internet\n";
                            sleep(2);
                        } elseif (strstr($postmessage,'Forbidden')) {
                            echo " > forbidden\n";
                            sleep(2);
                        } elseif (strstr($postmessage,"Post rating")) {
                           echo " > earnings saved\n";    
                        } else {
                           echo " > $postmessage\n";     
                        }
                        } else { echo " > undefined error\n";  }
                            
                        $PostNum++;
                        $xcount++;

                        sleep(1);
    
                    } while ($PostNum !=10);

                    echo "$White\n[$BeingRated] >>> ratings done\n";
                    echo "-------------\n";   
   #                 //// end of do...while /////////
                else :
                    echo "\n$Yellow >> error connecting to [$BeingRated]\n"  ; 
                     
                endif;
                  
                else:
                    echo "\n$Yellow >> skip rating [$BeingRated]\n";
    
            endif; //raters!=rated
                sleep(2);
           endforeach;
  #  ///////////// end of loop to each account to rate /////////////
  
    } else {
        echo "$Yellow";
        echo "$msgn\n";
        echo "$White";
        break;
    }  #// endif
    
    sleep(2);
    
    endforeach;
    
     echo "\n$White\n";
     echo "Summary - displaying earned GEMS\n";
     checkgems($raters,$mainpassword,$PhoneID, $PhoneModel);

    echo "$White\n\n";
    
    return;
 #   ///////////////// end of foreach loop to raters account //////////////////

} 
// end of ratemypost

///////////////////////////////////////////////////////
//
//  ROUTINE FOR ADDING POSTS/MOMENTS
//
//////////////////////////////////////////////////////

function addaddPostMomentToServer($posttype,$mydummy,$myaccounts)
{
    $Cyan     = "\033[0;36m" ;        # Cyan
    $White    = "\033[0;37m" ;       # White
    $Green    = "\033[0;32m" ;       # Green
    $Yellow   = "\033[0;33m" ;      # Yellow
    $Purple   = "\033[0;35m" ;      # Purple

$ScriptName ="add a $posttype (c) reneaparri";
$Web="https://github.com/reneaparri/lyka";

echo "$White";
echo "$ScriptName\n";
echo "$Web\n\n";
echo "\nAdd $posttype menu ----\n";
echo "$White\n[ 1 ]$Green main accounts";
echo "$White\n[ 2 ]$Green dummy accounts";
echo "$White\n[ 3 ]$Green other account";
echo "$White\n[ 4 ]$Green back\n\n";

   $inputtask = readline("Your selection : ");

   switch($inputtask) {
      case "1" : //post to main
        @system("clear");
        $mydummy=[];
       postit($mydummy,$myaccounts,"$posttype"); 
        exit;
      
      case "2" : //post to dummy
        @system("clear");
        $myaccounts=[];        
       postit($mydummy,$myaccounts,"$posttype");
        exit;
      
      case "3" : //post to other 
       @system("clear");
       post2others("$posttype");
       exit;

      case "4" :
       @system("clear");
       mainmenu();   

      default :
       @system("clear");
       mainmenu();   
   }     
return;
}

function postit($mydummy, $myaccounts, $posttype)
{
   @system("clear");

   //Set font color
   
   // Regular Colors
   $Black    = "\033[0;30m" ;     //  # Black
   $CRed     = "\033[0;31m" ;     //  # Red
   $Green    = "\033[0;32m" ;       # Green
   $Yellow   = "\033[0;33m" ;      # Yellow
   $Blue     = "\033[0;34m" ;        # Blue
   $Purple   = "\033[0;35m" ;      # Purple
   $Cyan     = "\033[0;36m" ;        # Cyan
   $White    = "\033[0;37m" ;       # White
   
   $ScriptName ="add $posttype (c) reneaparri";
   $Web="https://github.com/reneaparri/lyka";
   
   $acct=0;
   
   echo "$White";
   echo "$ScriptName\n";
   echo "$Web\n\n";
   echo "add $posttype to dummy+main account\n";
   
   $acct2post = []; 

   foreach($myaccounts as $acct)
    {
      array_push($acct2post,$acct);
    }

   foreach($mydummy as $acct)
   {
    array_push($acct2post,$acct);      
   }

   echo "$Green\n";
   echo "*Pls. use same password for your accounts*\n";
   echo "\n";
   
   echo "$White";
   $mainpassword=readline("Password : ");
   if ($mainpassword == '')
   {
       echo "$Yellow";
       echo "\n > sorry but no password was entered\n\n";
       mainmenu();  
   }
   
   echo "$White";
   echo "\nNumber of $posttype to add (default 10)?\n";
   $postcount=readline("Count : ");
   
   if ($postcount =='') {
       $postcount=10;
   }
   
   @system("clear");
   echo "$White\n";
   echo "$ScriptName\n";
   echo "$Web\n$Yellow\n";
   echo "time to add $posttype to your account\n";
   echo "fasten your seatbelt\n";
   sleep(2);
   
   loop2accounts($acct2post,$mainpassword,$posttype,$postcount);

} //end of postit
//////////////////////////////////////////////////////////////////////////////////

function post2others($posttype)
{
   @system("clear");

   //Set font color
   
   // Regular Colors
   $Black    = "\033[0;30m" ;     //  # Black
   $CRed     = "\033[0;31m" ;     //  # Red
   $Green    = "\033[0;32m" ;       # Green
   $Yellow   = "\033[0;33m" ;      # Yellow
   $Blue     = "\033[0;34m" ;        # Blue
   $Purple   = "\033[0;35m" ;      # Purple
   $Cyan     = "\033[0;36m" ;        # Cyan
   $White    = "\033[0;37m" ;       # White
   
   $ScriptName ="add $posttype to other account (c) reneaparri";
   $Web="https://github.com/reneaparri/lyka";
   
   $acct=0;
   
   echo "$White";
   echo "$ScriptName\n";
   echo "$Web\n\n";
   echo "add $posttype to other account\n";
   
   $acct2post = []; 

        $acct=0;

        echo "$Yellow\n";
        echo "Input username to add $posttype\n";
        echo "press enter when done\n$Green\n";
        do {
            $inputusername = readline("Username : ");
        if ($inputusername !='') {
            array_push($acct2post, "$inputusername",);
            $acct=1;
            }
        } while ($inputusername !='');
        
        if ($acct == 0)  {
            echo "$Yellow";
            echo " > pls. enter atleast one (1) username\n\n";
                mainmenu(); 
                }
        
        echo "$Green\n";
        echo "*Pls. use same password for your accounts*\n";
        echo "\n";
        
        echo "$White";
        $mainpassword=readline("Password : ");
        if ($mainpassword == '')
        {
            echo "$Yellow";
            echo "\n > no password was entered\n\n";
            mainmenu();  
        }
   
        echo "$White";
        echo "\nNumber of $posttype to add (default 10)?\n";
        $postcount=readline("Count : ");
        
        if ($postcount =='') {
            $postcount=10;
        }
        
        @system("clear");
        echo "$White\n";
        echo "$ScriptName\n";
        echo "$Web\n$Yellow\n";
        echo "time to add $posttype to your account\n";
        echo "fasten your seatbelt\n";
        sleep(2);
 
        loop2accounts($acct2post,$mainpassword,$posttype,$postcount);
   
   echo "$White\n";
   mainmenu();  

} //end of post2other


function loop2accounts($acct2post,$mainpassword,$posttype,$postcount)
{

    $Black    = "\033[0;30m" ;     //  # Black
    $CRed     = "\033[0;31m" ;     //  # Red
    $Green    = "\033[0;32m" ;       # Green
    $Yellow   = "\033[0;33m" ;      # Yellow
    $Blue     = "\033[0;34m" ;        # Blue
    $Purple   = "\033[0;35m" ;      # Purple
    $Cyan     = "\033[0;36m" ;        # Cyan
    $White    = "\033[0;37m" ;       # White
    
    $PhoneID=['df0439087259ad38','a5ead687bdb3729c','87a87fe99d0039a5'];
    array_push($PhoneID,'7d7e6f904741daea');
    array_push($PhoneID,'9f78dab798ab0324');
    array_push($PhoneID,'83d23b76250d2a97');
    array_push($PhoneID,'7ae21b1182e2a323');
    array_push($PhoneID,'29b3e709883d7321');
    array_push($PhoneID,'c51e10db899a4cc4');
    array_push($PhoneID,'47db99101c533bc5');

    $PhoneModel=array("iPhone 4","iPhone 4S","iPhone 5","iPhone 5c","iPhone 5s",
    "iPhone 6","iPhone 6 Plus","iPhone 6s","iPhone 6s Plus",
    "iPhone SE (1st generation)","iPhone 7","iPhone 7 Plus","iPhone 8",
    "iPhone 8 Plus","iPhone X","iPhone XR","iPhone XS","iPhone XS Max",
    "iPhone 11","iPhone 11 Pro","iPhone 11 Pro Max","iPhone SE","iPhone 12 mini","iPhone 12","iPhone 12 Pro",
    "Tecno Spark 7","Tecno Spark 7 Pro","Vivo V11i","Vivo V11","Vivo V11 Pro",
    "Oppo A94","Oppo A12","Vivo Z10","Samsung Galaxy S20","Vivo Y81","Vivo Nex S","Vivo Nex A","Vivo Y75s","Vivo Y83",
    "Vivo X21i","Vivo Z1","Vivo Y53i","Nokia 5","Nokia 6","Vivo Y71","Vivo X21 UD","Vivo X21","Vivo V9",
    "Vivo X20 Plus UD","Vivo Y75","Vivo V7","Samsung Galaxy S9","Vivo X20 Plus","Vivo X20","Vivo V7+",
    "Vivo Y69","Vivo V5s","LG G+","Vivo Y66","Sony Xperia 10","Nokia 3315","Vivo Y55s","Tecno Spark 6 Air","Tecno Spark 6 Go","Vivo Xplay6",
    "HTC U20 5G","Vivo X9","Google Pixel 5","OnePlus 9","OnePlus 10","Infinix Hot S10","Vivo X7","Vivo X6S Plus",
    "Vivo X6S","Vivo Y31L","Oppo A2","Oppo A11","Vivo Xplay5 Elite","Vivo Y51L","Vivo X6 Plus",
    "Vivo X6","Vivo Y51","Vivo Y27L","Vivo Y15S","Vivo V1Max","Vivo V1","Vivo X5Pro","Vivo X5Max+",
    "Vivo X5S L","Vivo X Shot","Vivo X3S","Vivo Y15","Vivo Y22","Vivo X5Max","Nokia 3210");

    $hash_tags =array("lykaglobal","lykaglobalph","lykagems","Travel", "SpreadLove",
    "StayBlessed","Goodluck","LYKAGlobal","LYKAEmpoweringLykans","TravelThainow2019",
    "WeRiseByLiftingOthers","LykaMall","LykaGems","LykaPH","Vivalasvegas",    
    "LykaGlobal","LykaShare","LykaWorld","MaxRate","LykaRetail",
    "StayBlessed","Goodluck","LYKAGlobal","LYKAEmpoweringLykans","TravelThainow2019",
    "WeRiseByLiftingOthers","LykaMall","LykaGems","LykaPH","Vivalasvegas",    
    "LykaGlobal","travelthainow2019","LykaUltraRater","LykaMerchants","travelthainow2019",
    "lykaglobal","lykaglobalph","lykagems","Travel", "SpreadLove",
    "StayBlessed","Goodluck","LYKAGlobal","LYKAEmpoweringLykans","TravelThainow2019",
    "LykaGlobal","LykaMall","LykaUltraRater","LykaMerchants","travelthainow2019",
    "lykaglobal","lykaglobalph","lykagems","Travel", "SpreadLove",
    "WeRiseByLiftingOthers","LykaMall","LykaGems","LykaPH","Vivalasvegas");
 
    $noofaccounts=count($acct2post);
    $posted=0;

    foreach ($acct2post as $currentUser) {
   
        $posted++;
        $deviceid=$PhoneID[rand(0,9)];
        $devicenamemodel=$PhoneModel[rand(0,80)];
    
    echo "$White\n";
    echo "Account Details ($posted of $noofaccounts)\n\n";
    printf("%-15s | %s\n","Username",$currentUser);
    echo "$Cyan";
    
    //Login to account
    $urll = "https://identity.mylykaapps.com/useraccounts/login";
    $curll = curl_init($urll);
    curl_setopt($curll, CURLOPT_URL, $urll);
    curl_setopt($curll, CURLOPT_POST, true);
    curl_setopt($curll, CURLOPT_RETURNTRANSFER, true);
    $headerss = array("Content-Type: application/json", "user-agent:Lyka/3.6.65 (com.thingsilikeapp; build:865 Android R 30)");
    curl_setopt($curll, CURLOPT_HTTPHEADER, $headerss);
    $DeviceInfo = <<<DATA
    {
    "countryCode": "US",
    "device": {
    "deviceId": "$deviceid",
    "deviceImei": "$deviceid",
    "deviceModel": "$devicenamemodel",
    "deviceName": "$devicenamemodel",
    "deviceOs": "Android",
    "isEmulator": false,
    "notificationToken": "eEBjxYrDSJyFw7N-DpEGNG:APA91bEZnWo-TDdSgVCzQcJq3gHioJtFThNyxw6PsgOCI1JHDzd55yqG-QZwAZRj4pwICrXo5VODiUYom7Fsf4Ql66-CWHFumNA2ynrKEP21bstPBMgwsN-3G_Ek0ZLcoKtVMg5oN6-gz",
    "osVersion": "11"
    },
    "password": "$mainpassword",
    "username": "$currentUser"
    }
    DATA;
    
    curl_setopt($curll, CURLOPT_POSTFIELDS, $DeviceInfo);
    $respp = curl_exec($curll);
    curl_close($curll);
    $jsonn = json_decode($respp);
    $msgn = $jsonn->message;
    
    if ($msgn == "User logged in") {
    
    $status = $jsonn->status;
    $vuser = $jsonn->data->username;
    $bearer = $jsonn->data->token->accessToken;
    
          echo "$White";
          printf("%-15s | %.2f\n","GEMS",getgembalance($bearer));
          //getgembalance($bearer);
          echo "$Cyan";
          echo "$msgn\n\n";
    
     $postloop=1;
     do {  
        
       echo "$White";
       echo "..$posttype #$postloop > "; 
       
       $deviceid = $PhoneID[rand(0,9)];
    
       echo "$Cyan";
       
         $title_content=$hash_tags[rand(0,57)];
         $xhash=$hash_tags[rand(0,57)];
    
       addPostMomentToServer($vuser, $bearer, $deviceid, $title_content, $xhash, $posttype);
       
       echo "\n";
       $postloop++;
    
    } while ($postloop !=$postcount+1);
    
    echo "$Yellow";
    echo "\n$posttype has been added to [$currentUser]\n\n";
    
    } else {
        echo "$Yellow";
        echo "$msgn\n";
        echo "$White";
        break;
    } //end of status==1   
    
    echo "\n$Green";
    echo "--------------------------------\n";
    sleep(2);
    
    } //end of loop for x username

    echo "\n$White\n";
    echo "Summary - add a $posttype\n";
    checkgems($acct2post,$mainpassword,$PhoneID, $PhoneModel);

    mainmenu();

} // loop2accts

// this function add a post or moment to LYKA server
function addPostMomentToServer($currentUser, $bearer, $device_id, $contents, $xhash, $posttype) {

   $currUsrID = getUserId($device_id, $bearer);

   $uploadLegacy = "https://media.mylykaapps.com/api/v1/media/social/multi-upload-url";
   
   $uploadPay = <<<DATA
       {"category":"$posttype",
        "clientId":"$currUsrID",
        "files":[{
            "fileName":"https://github.com/maximum001/images/blob/main/p1.jpeg", 
            "mediaType":"image"}]        }
   DATA; 
   
   $uploadLegPost = postX($uploadLegacy,$uploadPay,$bearer);
 
   if($uploadLegPost->data){
       $mediaID = $uploadLegPost->data[0]->mediaId;

       $amznToken = "https://media.mylykaapps.com/api/v1/access/aws/media-token/$currUsrID";
       $firstGet = getX($amznToken,$device_id,$bearer);

       if($firstGet->data){
           $amzIDid = $firstGet->data->identityId;
           $amzIDtoken = $firstGet->data->token; 

           $postURL = "https://cognito-identity.ap-southeast-1.amazonaws.com/";
           $postHeader =  array(
           "Content-Type: application/x-amz-json-1.1",
           "Accept-encoding: indentity",
           "X-Amz-Target: AWSCognitoIdentityService.GetCredentialsForIdentity",
           "user-agent: aws-sdk-android/2.22.4 Linux/3.18.140-gb765813d2c04 Dalvik/2.1.0/0 en_US") ;
           $amndata = <<<DATA
                   {"Logins": {
                       "cognito-identity.amazonaws.com": "$amzIDtoken"},
                           "IdentityId": "$amzIDid"}
                   DATA; 
           $postCurl = curl_init($postURL);
           curl_setopt($postCurl, CURLOPT_URL, $postURL);
           curl_setopt($postCurl, CURLOPT_POST, true);
           curl_setopt($postCurl, CURLOPT_RETURNTRANSFER, true);
           curl_setopt($postCurl, CURLOPT_HTTPHEADER, $postHeader);
           curl_setopt($postCurl, CURLOPT_POSTFIELDS, $amndata);
           $postResp = curl_exec($postCurl);
           curl_close($postCurl);
           $postjson = json_decode($postResp);

           if($postjson->Credentials){
               $sessToken = $postjson->Credentials->SessionToken;
               $aws_access_key_id = $postjson->Credentials->AccessKeyId;
               $aws_secret_access_key = $postjson->Credentials->SecretKey;

               //AWS Process
               $bucket_name = 'lyka-legacy-images-input';
               $aws_region = 'ap-southeast-1';
               $host_name = $bucket_name . '.s3.amazonaws.com';
               $content = "0";
               $content_title = $mediaID;
               $aws_service_name = 's3';
               $timestamp = gmdate('Ymd\THis\Z');
               $date = gmdate('Ymd');
               $request_headers = array();
               $request_headers['x-amz-date'] = $timestamp;
               $request_headers['Host'] = $host_name;
               $request_headers['x-amz-security-token'] = $sessToken;
               $request_headers['x-amz-content-sha256'] = hash('sha256', $content);
               ksort($request_headers);

               $canonical_headers = [];
               foreach($request_headers as $key => $value) {
                   $canonical_headers[] = strtolower($key) . ":" . $value;
               }
               $canonical_headers = implode("\n", $canonical_headers);

               // Signed headers
               $signed_headers = [];
               foreach($request_headers as $key => $value) {
                   $signed_headers[] = strtolower($key);
               }
               $signed_headers = implode(";", $signed_headers);

               // Cannonical request 
               $canonical_request = [];
               $canonical_request[] = "PUT";
               $canonical_request[] = "/" . $content_title;
               $canonical_request[] = "";
               $canonical_request[] = $canonical_headers;
               $canonical_request[] = "";
               $canonical_request[] = $signed_headers;
               $canonical_request[] = hash('sha256', $content);
               $canonical_request = implode("\n", $canonical_request);
               $hashed_canonical_request = hash('sha256', $canonical_request);

               // AWS Scope
               $scope = [];
               $scope[] = $date;
               $scope[] = $aws_region;
               $scope[] = $aws_service_name;
               $scope[] = "aws4_request";

               // String to sign
               $string_to_sign = [];
               $string_to_sign[] = "AWS4-HMAC-SHA256"; 
               $string_to_sign[] = $timestamp; 
               $string_to_sign[] = implode('/', $scope);
               $string_to_sign[] = $hashed_canonical_request;
               $string_to_sign = implode("\n", $string_to_sign);

               // Signing key
               $kSecret = 'AWS4' . $aws_secret_access_key;
               $kDate = hash_hmac('sha256', $date, $kSecret, true);
               $kRegion = hash_hmac('sha256', $aws_region, $kDate, true);
               $kService = hash_hmac('sha256', $aws_service_name, $kRegion, true);
               $kSigning = hash_hmac('sha256', 'aws4_request', $kService, true);

               // Signature
               $signature = hash_hmac('sha256', $string_to_sign, $kSigning);

               // Authorization
               $authorization = [
                   'Credential=' . $aws_access_key_id . '/' . implode('/', $scope),
                   'SignedHeaders=' . $signed_headers,
                   'Signature=' . $signature
               ];
               $authorization = 'AWS4-HMAC-SHA256' . ' ' . implode( ',', $authorization);

               // Curl headers
               $curl_headers = [ 'Authorization: ' . $authorization ];
               foreach($request_headers as $key => $value) {
                   $curl_headers[] = $key . ": " . $value; }

               $url = 'https://' . $host_name . '/' . $content_title;
               $ch = curl_init($url);
               curl_setopt($ch, CURLOPT_HEADER, false);
               curl_setopt($ch, CURLOPT_HTTPHEADER, $curl_headers);
               curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
               curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
               curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
               curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PUT");
               curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
               curl_exec($ch);
               $http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
               // echo $http_code;
               if ($http_code != 200) { echo "failed\n"; }
               
               $delURL = "https://lyka-legacy-images-input.s3.ap-southeast-1.amazonaws.com/".$mediaID;
               $delHeader = array(
                   "x-clientid: $device_id",
                   "x-amz-date: $timestamp",
                   "x-amz-content-sha256: STREAMING-AWS4-HMAC-SHA256-PAYLOAD",
                   "Authorization: $authorization"
               );
               $deleteCurlx = curl_init($delURL);
               curl_setopt($deleteCurlx, CURLOPT_URL, $delURL);
               curl_setopt($deleteCurlx, CURLOPT_RETURNTRANSFER, true);
               curl_setopt($deleteCurlx, CURLOPT_CUSTOMREQUEST, "PUT");
               curl_setopt($deleteCurlx, CURLOPT_HTTPHEADER, $delHeader);
               $deleteResp = curl_exec($deleteCurlx);
               curl_close($deleteCurlx);

                
                if ($posttype == "post") :
                  $uploadurl="https://posting.mylykaapps.com/api/v3/posts/AddImagePost";
                
                else :
                     $uploadurl = "https://momenting.mylykaapps.com/api/v3/moments/AddImageMoment";
                endif;

                sleep(1);

                if ($posttype == "post") :
                
                   $postresponse = postX($uploadurl, 
                   payload($device_id,
                   '"files":[{
                    "imageURL":"https://www.w3schools.com/Css/img_lights.jpg",
                    "height":1024,
                    "key":"'.$mediaID.'", 
                    "RemoteStorage":"lyka-legacy-images-input" ,
                    "type":"image","width":768}],
                    "isHighlight":false,
                    "isSharedLink":false,
                    "mediaTags":"[[]]",
                    title:"#ActiveLYKA'.date("l").'",
                    hashtags:"'.$xhash.'",
                    content: "'.$contents.'"'),
                    $bearer);
                else : 
                   $postresponse = postX($uploadurl, 
                   payload($device_id,
                   '"files":[{
                       "imageURL":"https://www.w3schools.com/Css/img_lights.jpg",
                       "height":2081,
                       "key":"'.$mediaID.'", 
                       "RemoteStorage":"lyka-legacy-images-input" ,
                       "type":"image",
                       "width":1079}]'),
                        $bearer);
                endif;

                $response_message = $postresponse->message;

                if (strstr($response_message, 'Post saved')) { echo "+1 post";}
                if( $response_message == "Moment retrieved."){ echo "+1 moments"; }


            } //end post-json
       }
    }     

}  //end of postmoments

   ///////////////////////////////////////////
   //
   // getuserID
   //
   //////////////////////////////////////////

function getUserId($rDevID, $mcCookie){
    $getUID = getX("https://profiles.mylykaapps.com/api/v3/profiles/GetUserProfileForEditing?os=android", $rDevID, $mcCookie);
 
    return $getUID->data->id;
 
 }
 
 function getX($urlx, $gdevID, $cooks = ""){
    $getURL = $urlx;
    $uAgent = 'Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28)';
    $getHeader = array(
        "Content-Type: application/json; charset=UTF-8",
        "user-agent: $uAgent",
        "authorization: Bearer $cooks",
        "x-clientid: $gdevID",
        );
        $getCurl = curl_init($getURL);
        curl_setopt($getCurl, CURLOPT_URL, $getURL);
        curl_setopt($getCurl, CURLOPT_HTTPGET, true);
        curl_setopt($getCurl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($getCurl, CURLOPT_HTTPHEADER, $getHeader);
        sleep(1);
        $getResp = curl_exec($getCurl);
        curl_close($getCurl);
        $getjson = json_decode($getResp);
 
        return $getjson;
 }
 
 function postX($urlx, $payloader, $cooks = ""){
    $postURL = $urlx;
    $uAgent = 'Lyka/3.6.65 (com.thingsilikeapp; build:865 Android O_MR1 28)';
    $postHeader = !$cooks 
        ? array(
        "Content-Type: application/json; charset=UTF-8",
        "user-agent: $uAgent") 
        : array(
        "Content-Type: application/json; charset=UTF-8",
        "user-agent: $uAgent","authorization: Bearer $cooks") ;
        $postCurl = curl_init($postURL);
        curl_setopt($postCurl, CURLOPT_URL, $postURL);
        curl_setopt($postCurl, CURLOPT_POST, true);
        curl_setopt($postCurl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($postCurl, CURLOPT_HTTPHEADER, $postHeader);
        curl_setopt($postCurl, CURLOPT_POSTFIELDS, $payloader);
        curl_setopt($postCurl, CURLOPT_SSL_VERIFYHOST, false);
        curl_setopt($postCurl, CURLOPT_SSL_VERIFYPEER, false);
        sleep(1);
        $postResp = curl_exec($postCurl);
        curl_close($postCurl);
        $postjson = json_decode($postResp);
 
        return $postjson;
 }
 
 function payload($devIDx, $xtraPay, $rTokenx = ""){
     $valdata = <<<DATA
             {"device": {
                 "deviceId": "$devIDx",
                 "deviceImei": "$devIDx",
                 "deviceModel": "Tecno Spark 7 Pro",
                 "deviceName": "Tecno Spark 7 Pro",
                 "deviceOs": "Android",
                 "isEmulator": false,
                 "osVersion": "11",
                 "notificationToken": "$rTokenx"
             },
             "countryCode": "US",
             $xtraPay
             }
             DATA; 
  
     return $valdata;
  }

#  
#  AN OOP to get the GEM balance of an account
#  function getgembalance
#  

function getgembalance($bearer)
{
    $urlbal = "https://wallets.mylykaapps.com/api/v3/wallets/getgems?os=android";
    $curlbal = curl_init($urlbal);
    curl_setopt($curlbal, CURLOPT_URL, $urlbal);
    curl_setopt($curlbal, CURLOPT_RETURNTRANSFER, true);   
    $headersbal = array("authorization: Bearer $bearer",);
    curl_setopt($curlbal, CURLOPT_HTTPHEADER, $headersbal);
    $respbal = curl_exec($curlbal);
    curl_close($curlbal);
  
    $jsonbal = json_decode($respbal);
    $gemsavailable = $jsonbal->data->totalGem;

    return $gemsavailable; 

} //end of getgembalance

   ?>
